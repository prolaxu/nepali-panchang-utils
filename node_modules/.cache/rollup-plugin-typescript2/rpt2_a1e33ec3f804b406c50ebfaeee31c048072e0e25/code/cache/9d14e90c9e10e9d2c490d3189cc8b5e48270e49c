{"code":"import { MhahPanchangImpl } from './mhahPanchangImpl';\r\nimport { MhahSunMoonTimer } from './mhahSunMoonTimer';\r\nimport { MhahCalculateFunc } from './mhahCalculateFunc';\r\nexport class MhahCalendar {\r\n    calendar(mhahConstant, dt, lat, lng, height) {\r\n        let Tithi = {};\r\n        let Nakshatra = {};\r\n        let Yoga = {};\r\n        let Karna = {};\r\n        let Masa = {};\r\n        let MoonMasa = {};\r\n        let Raasi = {};\r\n        let Ritu = {};\r\n        let Paksha = {};\r\n        let mhahPanchangImpl = new MhahPanchangImpl(mhahConstant);\r\n        let mhahCalculateFunc = new MhahCalculateFunc();\r\n        let mhahSunMoonTimer = new MhahSunMoonTimer();\r\n        let sunRise = mhahSunMoonTimer.getSunRiseJd(dt, lat, lng, height);\r\n        let nn_tithi = this.getCalendarTithi(sunRise, mhahPanchangImpl);\r\n        let nn_paksha = mhahCalculateFunc.getPaksha(nn_tithi);\r\n        let ayanamsaAtRise = mhahPanchangImpl.calcayan(sunRise);\r\n        let nn_naksh = this.getCalendarNakshatra(mhahCalculateFunc, mhahPanchangImpl, ayanamsaAtRise, sunRise);\r\n        let nn_yoga = this.getCalendarYoga(mhahCalculateFunc, mhahPanchangImpl, sunRise, ayanamsaAtRise);\r\n        let nn_karana = mhahCalculateFunc.getKarana(mhahPanchangImpl.moon(sunRise), mhahPanchangImpl.sun(sunRise))[0];\r\n        let nn_raasi = this.getCalendarRaasi(mhahPanchangImpl, mhahPanchangImpl.sun(sunRise), ayanamsaAtRise);\r\n        let masa = this.getMasa(mhahPanchangImpl, nn_tithi, sunRise);\r\n        let ritu = this.getRitu(masa.n_maasa);\r\n        Raasi.ino = nn_raasi - 1;\r\n        Raasi.name_en_UK = mhahConstant.Raasi.name_en_UK[nn_raasi - 1];\r\n        Raasi.name = mhahConstant.Raasi.name[nn_raasi - 1];\r\n        Tithi.name = mhahConstant.Tithi.name[nn_tithi - 1];\r\n        Tithi.name_en_IN = mhahConstant.Tithi.name_en_IN[nn_tithi - 1];\r\n        Tithi.ino = nn_tithi - 1;\r\n        Paksha.ino = nn_paksha;\r\n        Paksha.name = mhahConstant.Paksha.name[nn_paksha];\r\n        Paksha.name_en_IN = mhahConstant.Paksha.name_en_IN[nn_paksha];\r\n        Paksha.name_en_UK = mhahConstant.Paksha.name_en_UK[nn_paksha];\r\n        Nakshatra.name = mhahConstant.Nakshatra.name[nn_naksh];\r\n        Nakshatra.name_en_IN = mhahConstant.Nakshatra.name_en_IN[nn_naksh];\r\n        Nakshatra.ino = nn_naksh;\r\n        Yoga.name = mhahConstant.Yoga.name[nn_yoga];\r\n        Yoga.name_en_IN = mhahConstant.Yoga.name_en_IN[nn_yoga];\r\n        Yoga.ino = nn_yoga;\r\n        Karna.name = mhahConstant.Karna.name[nn_karana];\r\n        Karna.name_en_IN = mhahConstant.Karna.name_en_IN[nn_karana];\r\n        Karna.ino = nn_karana;\r\n        Masa.ino = nn_raasi - 1;\r\n        Masa.name = mhahConstant.Masa.name[nn_raasi - 1];\r\n        Masa.name_en_IN = mhahConstant.Masa.name_en_IN[nn_raasi - 1];\r\n        MoonMasa.ino = masa.n_maasa - 1;\r\n        MoonMasa.isLeapMonth = masa.is_leap_month;\r\n        MoonMasa.name = mhahConstant.Masa.name[masa.n_maasa - 1];\r\n        MoonMasa.name_en_IN = mhahConstant.Masa.name_en_IN[masa.n_maasa - 1];\r\n        Ritu.ino = ritu;\r\n        Ritu.name = mhahConstant.Ritu.name[ritu];\r\n        Ritu.name_en_UK = mhahConstant.Ritu.name_en_UK[ritu];\r\n        return {\r\n            Tithi,\r\n            Paksha,\r\n            Nakshatra,\r\n            Yoga,\r\n            Karna,\r\n            Masa,\r\n            MoonMasa,\r\n            Raasi,\r\n            Ritu,\r\n        };\r\n    }\r\n    // get tithi in (1-15) Sukla and (16-30) Krushna\r\n    getCalendarTithi(sunRise, mhahPanchangImpl) {\r\n        let moonPhaseToday = mhahPanchangImpl.lunarPhase(sunRise);\r\n        let today = Math.ceil(moonPhaseToday / 12);\r\n        let tithi = today;\r\n        //check for skipped tithi\r\n        let moonPhaseTommorow = mhahPanchangImpl.lunarPhase(sunRise + 1);\r\n        let tommorow = Math.ceil(moonPhaseTommorow / 12);\r\n        let isSkipped = (tommorow - today) % 30 > 1;\r\n        if (isSkipped) {\r\n            tithi = today + 1;\r\n        }\r\n        return tithi;\r\n    }\r\n    getCalendarNakshatra(mhahCalculateFunc, mhahPanchangImpl, ayanamsa, sunRise) {\r\n        let nak_today = mhahCalculateFunc.getNakshatra(mhahPanchangImpl, mhahPanchangImpl.moon(sunRise), ayanamsa);\r\n        let nak_tmrw = mhahCalculateFunc.getNakshatra(mhahPanchangImpl, mhahPanchangImpl.moon(sunRise + 1), mhahPanchangImpl.calcayan(sunRise + 1));\r\n        let n_nak = nak_today;\r\n        let isSkipped = (nak_tmrw - nak_today) % 27 > 1;\r\n        if (isSkipped) {\r\n            n_nak = nak_today + 1;\r\n        }\r\n        return n_nak;\r\n    }\r\n    getCalendarYoga(mhahCalculateFunc, mhahPanchangImpl, sunRise, ayanamsa) {\r\n        let todayYoga = mhahCalculateFunc.getYoga(mhahCalculateFunc.getZYoga(mhahPanchangImpl, ayanamsa, sunRise));\r\n        let tmorowYoga = mhahCalculateFunc.getYoga(mhahCalculateFunc.getZYoga(mhahPanchangImpl, mhahPanchangImpl.calcayan(sunRise + 1), sunRise + 1));\r\n        let n_yoga = todayYoga;\r\n        let isSkipped = (tmorowYoga - todayYoga) % 27 > 1;\r\n        if (isSkipped) {\r\n            n_yoga = todayYoga + 1;\r\n        }\r\n        return n_yoga;\r\n    }\r\n    getCalendarRaasi(mhahPanchangImpl, Lsun, ayanamsa) {\r\n        let solar_nirayana = mhahPanchangImpl.fix360(Lsun + ayanamsa);\r\n        return Math.ceil(solar_nirayana / 30);\r\n    }\r\n    getMasa(mhahPanchangImpl, tithi, sunrise) {\r\n        let lastNewMoon = sunrise - (tithi - 1);\r\n        let nextNewMoon = sunrise + (29 - (tithi - 1));\r\n        let currentSolarMonth = this.getCalendarRaasi(mhahPanchangImpl, mhahPanchangImpl.sun(lastNewMoon), mhahPanchangImpl.calcayan(lastNewMoon));\r\n        let nextSolarMonth = this.getCalendarRaasi(mhahPanchangImpl, mhahPanchangImpl.sun(nextNewMoon), mhahPanchangImpl.calcayan(nextNewMoon));\r\n        let is_leap_month = currentSolarMonth === nextSolarMonth;\r\n        let n_maasa = is_leap_month ? currentSolarMonth : currentSolarMonth + 1;\r\n        if (n_maasa > 12) {\r\n            n_maasa = n_maasa % 12;\r\n        }\r\n        return { n_maasa, is_leap_month };\r\n    }\r\n    getRitu(masa_num) {\r\n        return Math.floor((masa_num - 1) / 2);\r\n    }\r\n}\r\n//# sourceMappingURL=mhahCalendar.js.map","references":["/home/laxu/Desktop/astro/mhah-panchang/src/mhahConstant.ts","/home/laxu/Desktop/astro/mhah-panchang/src/mhahPanchangImpl.ts","/home/laxu/Desktop/astro/mhah-panchang/src/mhahSunMoonTimer.ts","/home/laxu/Desktop/astro/mhah-panchang/src/mhahCalculateFunc.ts"],"map":"{\"version\":3,\"file\":\"mhahCalendar.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/mhahCalendar.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,gBAAgB,EAAE,MAAM,oBAAoB,CAAC;AACtD,OAAO,EAAE,gBAAgB,EAAE,MAAM,oBAAoB,CAAC;AACtD,OAAO,EAAE,iBAAiB,EAAE,MAAM,qBAAqB,CAAC;AACxD,MAAM,OAAO,YAAY;IACvB,QAAQ,CACN,YAA0B,EAC1B,EAAQ,EACR,GAAW,EACX,GAAW,EACX,MAAe;QAEf,IAAI,KAAK,GAAQ,EAAQ,CAAC;QAC1B,IAAI,SAAS,GAAQ,EAAQ,CAAC;QAC9B,IAAI,IAAI,GAAQ,EAAQ,CAAC;QACzB,IAAI,KAAK,GAAQ,EAAQ,CAAC;QAC1B,IAAI,IAAI,GAAQ,EAAQ,CAAC;QACzB,IAAI,QAAQ,GAAQ,EAAQ,CAAC;QAC7B,IAAI,KAAK,GAAQ,EAAQ,CAAC;QAC1B,IAAI,IAAI,GAAQ,EAAQ,CAAC;QACzB,IAAI,MAAM,GAAQ,EAAQ,CAAC;QAC3B,IAAI,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,YAAY,CAAC,CAAC;QAC1D,IAAI,iBAAiB,GAAG,IAAI,iBAAiB,EAAE,CAAC;QAChD,IAAI,gBAAgB,GAAG,IAAI,gBAAgB,EAAE,CAAC;QAC9C,IAAI,OAAO,GAAG,gBAAgB,CAAC,YAAY,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;QAClE,IAAI,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;QAChE,IAAI,SAAS,GAAG,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACtD,IAAI,cAAc,GAAG,gBAAgB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACxD,IAAI,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CACtC,iBAAiB,EACjB,gBAAgB,EAChB,cAAc,EACd,OAAO,CACR,CAAC;QACF,IAAI,OAAO,GAAG,IAAI,CAAC,eAAe,CAChC,iBAAiB,EACjB,gBAAgB,EAChB,OAAO,EACP,cAAc,CACf,CAAC;QACF,IAAI,SAAS,GAAG,iBAAiB,CAAC,SAAS,CACzC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,EAC9B,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,CAC9B,CAAC,CAAC,CAAC,CAAC;QACL,IAAI,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAClC,gBAAgB,EAChB,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,EAC7B,cAAc,CACf,CAAC;QAEF,IAAI,IAAI,GAAgD,IAAI,CAAC,OAAO,CAClE,gBAAgB,EAChB,QAAQ,EACR,OAAO,CACR,CAAC;QAEF,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEtC,KAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;QACzB,KAAK,CAAC,UAAU,GAAG,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QAC/D,KAAK,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QACnD,KAAK,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QACnD,KAAK,CAAC,UAAU,GAAG,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QAC/D,KAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;QACvB,MAAM,CAAC,IAAI,GAAG,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,UAAU,GAAG,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAC9D,MAAM,CAAC,UAAU,GAAG,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAC9D,SAAS,CAAC,IAAI,GAAG,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvD,SAAS,CAAC,UAAU,GAAG,YAAY,CAAC,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnE,SAAS,CAAC,GAAG,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC;QACnB,KAAK,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAChD,KAAK,CAAC,UAAU,GAAG,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAC5D,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QAC7D,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QAChC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;QAC1C,QAAQ,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;QACzD,QAAQ,CAAC,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACrD,OAAO;YACL,KAAK;YACL,MAAM;YACN,SAAS;YACT,IAAI;YACJ,KAAK;YACL,IAAI;YACJ,QAAQ;YACR,KAAK;YACL,IAAI;SACL,CAAC;IACJ,CAAC;IAED,gDAAgD;IAChD,gBAAgB,CAAC,OAAe,EAAE,gBAAkC;QAClE,IAAI,cAAc,GAAG,gBAAgB,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAC1D,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;QAC3C,IAAI,KAAK,GAAG,KAAK,CAAC;QAClB,yBAAyB;QACzB,IAAI,iBAAiB,GAAG,gBAAgB,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;QACjE,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC,CAAC;QACjD,IAAI,SAAS,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC5C,IAAI,SAAS,EAAE;YACb,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACnB;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,oBAAoB,CAClB,iBAAoC,EACpC,gBAAkC,EAClC,QAAgB,EAChB,OAAe;QAEf,IAAI,SAAS,GAAG,iBAAiB,CAAC,YAAY,CAC5C,gBAAgB,EAChB,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,EAC9B,QAAQ,CACT,CAAC;QACF,IAAI,QAAQ,GAAG,iBAAiB,CAAC,YAAY,CAC3C,gBAAgB,EAChB,gBAAgB,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,EAClC,gBAAgB,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC,CACvC,CAAC;QACF,IAAI,KAAK,GAAG,SAAS,CAAC;QACtB,IAAI,SAAS,GAAG,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAChD,IAAI,SAAS,EAAE;YACb,KAAK,GAAG,SAAS,GAAG,CAAC,CAAC;SACvB;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,eAAe,CACb,iBAAoC,EACpC,gBAAkC,EAClC,OAAe,EACf,QAAgB;QAEhB,IAAI,SAAS,GAAG,iBAAiB,CAAC,OAAO,CACvC,iBAAiB,CAAC,QAAQ,CAAC,gBAAgB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAChE,CAAC;QACF,IAAI,UAAU,GAAG,iBAAiB,CAAC,OAAO,CACxC,iBAAiB,CAAC,QAAQ,CACxB,gBAAgB,EAChB,gBAAgB,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC,EACtC,OAAO,GAAG,CAAC,CACZ,CACF,CAAC;QACF,IAAI,MAAM,GAAG,SAAS,CAAC;QACvB,IAAI,SAAS,GAAG,CAAC,UAAU,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAClD,IAAI,SAAS,EAAE;YACb,MAAM,GAAG,SAAS,GAAG,CAAC,CAAC;SACxB;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,gBAAgB,CACd,gBAAkC,EAClC,IAAY,EACZ,QAAgB;QAEhB,IAAI,cAAc,GAAG,gBAAgB,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC;QAC9D,OAAO,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;IACxC,CAAC;IAED,OAAO,CAAC,gBAAkC,EAAE,KAAa,EAAE,OAAe;QACxE,IAAI,WAAW,GAAG,OAAO,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QACxC,IAAI,WAAW,GAAG,OAAO,GAAG,CAAC,EAAE,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAC3C,gBAAgB,EAChB,gBAAgB,CAAC,GAAG,CAAC,WAAW,CAAC,EACjC,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,CACvC,CAAC;QACF,IAAI,cAAc,GAAG,IAAI,CAAC,gBAAgB,CACxC,gBAAgB,EAChB,gBAAgB,CAAC,GAAG,CAAC,WAAW,CAAC,EACjC,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,CACvC,CAAC;QAEF,IAAI,aAAa,GAAG,iBAAiB,KAAK,cAAc,CAAC;QACzD,IAAI,OAAO,GAAG,aAAa,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,iBAAiB,GAAG,CAAC,CAAC;QACxE,IAAI,OAAO,GAAG,EAAE,EAAE;YAChB,OAAO,GAAG,OAAO,GAAG,EAAE,CAAC;SACxB;QAED,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC;IACpC,CAAC;IAED,OAAO,CAAC,QAAgB;QACtB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;CACF\"}"}
